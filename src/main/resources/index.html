<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD App </title>

<script
        src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
        crossorigin="anonymous"></script>
    </head>
<script>


class Person {
        constructor(id, firstName, lastName, birthDate) {
            this.id = id;
            this.firstName = firstName;
            this.lastName = lastName;
            this.birthDate;
        }
    }

        function create(event) {
            // Get the new person's data from the input fields
            var firstName = document.getElementById("firstName").value;
            var lastName = document.getElementById("lastName").value;
            var birthDate = document.getElementById("birthDate").value;

            // Create an object with the new person's data
            var newPersonData = {
                "firstName": firstName,
                "lastName": lastName,
                "birthDate": birthDate
            };

            // Make an AJAX POST request to the backend endpoint
            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: "/create",
                data: JSON.stringify(newPersonData),
                success: function (data, status, xhr) {
                    // Display a success message in the result div
                    var resultDiv = document.getElementById("result");
                    resultDiv.innerHTML = "<h2>Created Person Data</h2>" +
                        "<p>ID: " + data.id + "</p>" +
                        "<p>First Name: " + data.firstName + "</p>" +
                        "<p>Last Name: " + data.lastName + "</p>" +
                        "<p>Birth Date: " + data.birthDate + "</p>";

                    // Optionally, you can extract the new person's ID from the response headers
                    var newPersonId = xhr.getResponseHeader("Location");
                    if (newPersonId) {
                        resultDiv.innerHTML += "<p>New Person ID: " + newPersonId + "</p>";
                    }
                }
        });
    }

        function read(event) {
            // Get the ID from the input field
            var id = document.getElementById("personId").value;

            // Make an AJAX GET request to the backend endpoint
            $.ajax({
                type: "GET",
                url: "/read/{id}" + id,
                success: function (data) {
                    // Display the data in the result div
                    var resultDiv = document.getElementById("result");
                    resultDiv.innerHTML = "<h2>Person Data</h2>" +
                        "<p>ID: " + data.id + "</p>" +
                        "<p>Name: " + data.name + "</p>" +
                        "<p>Age: " + data.age + "</p>";
                }
            });
        }

        function readAll(event) {
            // Make an AJAX GET request to the backend endpoint
            $.ajax({
                type: "GET",
                url: "/readAll",
                success: function (data) {
                    // Display the data in the result div
                    var resultDiv = document.getElementById("result");
                    resultDiv.innerHTML = "<h2>Person Data</h2>";
                    
                    // Loop through the data and display each person's information
                    for (var i = 0; i < data.length; i++) {
                        resultDiv.innerHTML += "<p>ID: " + data[i].id + "</p>" +
                            "<p>Name: " + data[i].name + "</p>" +
                            "<p>Age: " + data[i].age + "</p><hr>";
                    }
                }
            });
        }

        function update(event) {
            // Get the ID, new first name, new last name, and new birth date from the input fields
            var id = document.getElementById("updateId").value;
            var newFirstName = document.getElementById("updateFirstName").value;
            var newLastName = document.getElementById("updateLastName").value;
            var newBirthDate = document.getElementById("updateBirthDate").value;

            // Create an object with the updated data
            var updatedData = {
                "firstName": newFirstName,
                "lastName": newLastName,
                "birthDate": newBirthDate
            };

            // Make an AJAX PUT request to the backend endpoint
            $.ajax({
                type: "PUT",
                contentType: "application/json",
                url: "/update/{id}" + id,
                data: JSON.stringify(updatedData),
                success: function (data) {
                    // Display the updated person's data in the result div
                    var resultDiv = document.getElementById("result");
                    resultDiv.innerHTML = "<h2>Updated Person Data</h2>" +
                        "<p>ID: " + data.id + "</p>" +
                        "<p>First Name: " + data.firstName + "</p>" +
                        "<p>Last Name: " + data.lastName + "</p>" +
                        "<p>Birth Date: " + data.birthDate + "</p>";
                }

            });
        }

        function deleteById(event) {
            // Get the ID to be deleted from the input field
            var id = document.getElementById("deleteId").value;

            // Make an AJAX DELETE request to the backend endpoint
            $.ajax({
                type: "DELETE",
                url: "/delete/{id}" + id,
                success: function () {
                    // Display a success message in the result div
                    var resultDiv = document.getElementById("result");
                    resultDiv.innerHTML = "<p>Person with ID " + id + " has been deleted.</p>";
                }
            });
        }

</script>


<body>
    <form>
        <input id="person-id" placeholder="ID"><br>
        <input id="first-name" placeholder="First Name"><br>
        <input id="last-name" placeholder="Last Name"><br>
        <button onclick="create(event)">Create</button>
        <!-- Add other CRUD operation buttons here -->
        //creates buttons on the screen
        <button onclick="read(event)">Read</button>
        <button onclick="readAll(event)">ReadAll</button>
        <button onclick="update(event)">Update</button>
        <button onclick="deleteById(event)">Delete</button>
        
    </form>
</body>
</html>